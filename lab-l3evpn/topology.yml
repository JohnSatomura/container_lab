name: lab-l3evpn

topology:
  nodes:
    spine1:
      kind: ceos
      image: ceos:4.34.4M
      startup-config: configs-init/spine1.cfg
    spine2:
      kind: ceos
      image: ceos:4.34.4M
      startup-config: configs-init/spine2.cfg
    leaf1:
      kind: ceos
      image: ceos:4.34.4M
      startup-config: configs-init/leaf1.cfg
    leaf2:
      kind: ceos
      image: ceos:4.34.4M
      startup-config: configs-init/leaf2.cfg
    host1:
      kind: ceos
      image: ceos:4.34.4M
      startup-config: configs-init/host1.cfg
    host2:
      kind: ceos
      image: ceos:4.34.4M
      startup-config: configs-init/host2.cfg
    host3:
      kind: ceos
      image: ceos:4.34.4M
      startup-config: configs-init/host3.cfg

  links:
    - endpoints: ["spine1:eth1", "leaf1:eth1"]   # Spine1 - Leaf1
    - endpoints: ["spine1:eth2", "leaf2:eth1"]   # Spine1 - Leaf2
    - endpoints: ["spine2:eth1", "leaf1:eth2"]   # Spine2 - Leaf1
    - endpoints: ["spine2:eth2", "leaf2:eth2"]   # Spine2 - Leaf2
    - endpoints: ["leaf1:eth3", "host1:eth1"]    # Leaf1  - Host1 (VLAN10/TENANT_A)
    - endpoints: ["leaf1:eth4", "host3:eth1"]    # Leaf1  - Host3 (VLAN30/TENANT_B)
    - endpoints: ["leaf2:eth3", "host2:eth1"]    # Leaf2  - Host2 (VLAN20/TENANT_A)
